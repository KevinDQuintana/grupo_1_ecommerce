<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head') %>

<body>
    <%- include('../partials/header') %>
    <main class="container">
        <div class="product-form">
            <h1>Añadir producto a la lista de ventas</h1>
            <form action="/products" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="type" value="isProduct">
                <% if (locals.errors && errors.image) { %>
                    <input style="border: red solid 2px;" class="product-form__image" type="file" placeholder="Imagen" name="image" >
                    <div class="error"><%= errors.image.msg %></div>
                <% } else { %>
                    <input class="product-form__image" type="file" placeholder="Imagen" name="image" >
                <% } %>
                <% if (locals.errors && errors.name) { %>
                    <input style="border: red solid 2px;" type="text" placeholder="Nombre del producto" name="name" value="<%= locals.oldData ? oldData.name : null %>" >
                    <div class="error"><%= errors.name.msg %></div>
                <% } else { %>
                    <input type="text" placeholder="Nombre del producto" name="name" value="<%= locals.oldData ? oldData.name : null %>" >
                <% } %>
                <% if (locals.errors && errors.price) { %>
                    <input style="border: red solid 2px;" type="number" placeholder="Precio" name="price" value="<%= locals.oldData ? oldData.price : null %>" >
                    <div class="error"><%= errors.price.msg %></div>
                <% } else { %>
                    <input type="number" placeholder="Precio" name="price" value="<%= locals.oldData ? oldData.price : null %>" >
                <% } %>
                <% if (locals.errors && errors.discount) { %>
                    <input style="border: red solid 2px;" type="number" placeholder="Descuento" name="discount" value="<%= locals.oldData ? oldData.discount : null %>" >
                    <div class="error"><%= errors.discount.msg %></div>
                <% } else { %>
                    <input type="number" placeholder="Descuento" name="discount" value="<%= locals.oldData ? oldData.discount : null %>" >
                <% } %>
                <% if (locals.errors && errors.descriptionTitle) { %>
                    <input style="border: red solid 2px;" type="text" placeholder="Título de la descripción" name="descriptionTitle" value="<%= locals.oldData ? oldData.descriptionTitle : null %>" >
                    <div class="error"><%= errors.descriptionTitle.msg %></div>
                <% } else { %>
                    <input type="text" placeholder="Título de la descripción" name="descriptionTitle" value="<%= locals.oldData ? oldData.descriptionTitle : null %>" >
                <% } %>
                <% if (locals.errors && errors.description) { %>
                    <textarea  style="border: red solid 2px;" placeholder="Descripción" name="description" ><%= locals.oldData ? oldData.description : null %></textarea>
                    <div class="error"><%= errors.description.msg %></div>
                <% } else { %>
                    <textarea placeholder="Descripción" name="description" ><%= locals.oldData ? oldData.description : null %></textarea>
                <% } %>
                <% if (locals.errors && errors.stock) { %>
                    <input style="border: red solid 2px;" type="number" placeholder="Stock" name="stock" value="<%= locals.oldData ? oldData.stock : null %>" >
                    <div class="error"><%= errors.stock.msg %></div>
                <% } else { %>
                    <input type="number" placeholder="Stock" name="stock" value="<%= locals.oldData ? oldData.stock : null %>" >
                <% } %>
                <% if (locals.errors && errors.specs) { %>
                    <textarea style="border: red solid 2px;" placeholder="Características del producto" name="specs" ><%= locals.oldData ? oldData.specs : null %></textarea>
                    <div class="error"><%= errors.specs.msg %></div>
                <% } else { %>
                    <textarea placeholder="Características del producto" name="specs" ><%= locals.oldData ? oldData.specs : null %></textarea>
                <% } %>
                <% if (locals.errors && errors.category) { %>
                    <select style="border: red solid 2px;" class="controlar" name="category" id="category" >
                        <option value="">Elegí una categoría:</option>
                        <% for(const oneCategory of productCategories) { %>
                            <option value="<%= oneCategory.category_id %>" <%= locals.oldData && (oneCategory.category_id == oldData.category) ? 'selected' : null %>> <%= oneCategory.name %> </option>
                        <% } %>
                    </select>
                    <div class="error"><%= errors.category.msg %></div>
                <% } else { %>
                    <select class="controlar" name="category" id="category" >
                        <option value="">Elegí una categoría:</option>
                        <% for(const oneCategory of productCategories) { %>
                            <option value="<%= oneCategory.category_id %>" <%= locals.oldData && (oneCategory.category_id == oldData.category) ? 'selected' : null %>> <%= oneCategory.name %> </option>
                        <% } %>
                    </select>
                <% } %>
                <% if (locals.errors && errors.brand) { %>
                    <select style="border: red solid 2px;" class="controlar" name="brand" id="brand" >
                        <option value="">Elegí una marca:</option>
                        <% for(const oneBrand of productBrands) { %>
                            <option value="<%= oneBrand.brand_id %>" <%= locals.oldData && (oneBrand.brand_id == oldData.brand) ? 'selected' : null %>> <%= oneBrand.name %> </option>
                        <% } %>
                    </select>
                    <div class="error"><%= errors.brand.msg %></div>
                <% } else { %>
                    <select class="controlar" name="brand" id="brand" >
                        <option value="">Elegí una marca:</option>
                        <% for(const oneBrand of productBrands) { %>
                            <option value="<%= oneBrand.brand_id %>" <%= locals.oldData && (oneBrand.brand_id == oldData.brand) ? 'selected' : null %>> <%= oneBrand.name %> </option>
                        <% } %>
                    </select>
                <% } %>
                <% if (locals.errors && errors.color) { %>
                    <select style="border: red solid 2px;" class="controlar" name="color" id="color" >
                        <option value="">Elegí un color:</option>
                        <% for(const oneColor of productColors) { %>
                            <option value="<%= oneColor.color_id %>" <%= locals.oldData && (oneColor.color_id == oldData.color) ? 'selected' : null %>> <%= oneColor.name %> </option>
                        <% } %>
                    </select>
                    <div class="error"><%= errors.color.msg %></div>
                <% } else { %>
                    <select class="controlar" name="color" id="color" >
                        <option value="">Elegí un color:</option>
                        <% for(const oneColor of productColors) { %>
                            <option value="<%= oneColor.color_id %>" <%= locals.oldData && (oneColor.color_id == oldData.color) ? 'selected' : null %>> <%= oneColor.name %> </option>
                        <% } %>
                    </select>
                <% } %>
                <button type="submit" class="product-form__button">Agregar producto</button>
            </form>
        </div>
    </main>
    <%- include('../partials/footer') %>
</body>
</html>