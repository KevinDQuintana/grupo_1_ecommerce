<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head') %>

<body>
	<%- include('../partials/header') %>
		<main class="container">
			<section class="registro">
				<h2>Registro de usuario</h2>
				<hr>
				<form method="POST" action="/users/signup" enctype="multipart/form-data">
					<input type="hidden" name="type" value="isUser">
					<% if (locals.errors && errors.email) { %>
						<input class="controlar" style="border: red solid 2px;" name="email" id="email" placeholder="Email" value="<%= locals.oldData ? oldData.email : null %>">
						<div class="error"><%= errors.email.msg %></div>
					<% } else { %>
						<input class="controlar" name="email" id="email" placeholder="Email" value="<%= locals.oldData ? oldData.email : null %>">
						<% } %>
						<% if (locals.errors && errors.password) { %>
							<input class="controlar" style="border: red solid 2px;" name="password" id="password" placeholder="Contraseña">
							<div class="error"><%= errors.password.msg %></div>
					<% } else { %>
						<input class="controlar" name="password" id="password" placeholder="Contraseña">
						<% } %>
					<h2 style="margin-top: 20px; margin-bottom: 8px;">Informacion Personal</h2>
					<hr>
					<% if (locals.errors && errors.firstName) { %>
						<input class="controlar" style="border: red solid 2px;" name="firstName" id="firstName" placeholder="Nombre"  value="<%= locals.oldData ? oldData.firstName : null %>">
						<div class="error"><%= errors.firstName.msg %></div>
					<% } else { %>
						<input class="controlar" name="firstName" id="firstName" placeholder="Nombre"  value="<%= locals.oldData ? oldData.firstName : null %>">
						<% } %>
						<% if (locals.errors && errors.lastName) { %>
							<input class="controlar" style="border: red solid 2px;" name="lastName" id="lastName" placeholder="Apellido"  value="<%= locals.oldData ? oldData.lastName : null %>">
						<div class="error"><%= errors.lastName.msg %></div>
					<% } else { %>
						<input class="controlar" name="lastName" id="lastName" placeholder="Apellido"  value="<%= locals.oldData ? oldData.lastName : null %>">
						<% } %>
						<% if (locals.errors && errors.dni) { %>
							<input class="controlar" style="border: red solid 2px;" name="dni" id="dni" placeholder="Numero de DNI"  value="<%= locals.oldData ? oldData.dni : null %>">
						<div class="error"><%= errors.dni.msg %></div>
					<% } else { %>
						<input class="controlar" name="dni" id="dni" placeholder="Numero de DNI"  value="<%= locals.oldData ? oldData.dni : null %>">
						<% } %>
						<% if (locals.errors && errors.phone) { %>
							<input class="controlar" style="border: red solid 2px;" name="phone" id="phone" placeholder="Numero de telefono"  value="<%= locals.oldData ? oldData.phone : null %>">
						<div class="error"><%= errors.phone.msg %></div>
					<% } else { %>
						<input class="controlar" name="phone" id="phone" placeholder="Numero de telefono"  value="<%= locals.oldData ? oldData.phone : null %>">
						<% } %>
						<% if (locals.errors && errors.category) { %>
							<select style="border: red solid 2px;" class="controlar" name="category" id="category" >
								<option value="">Elegí una categoría:</option>
								<% for(const oneCategory of usersCategories) { %>
									<option value="<%= oneCategory.category_id %>" <%= locals.oldData && (oneCategory.name === oldData.category) ? 'selected' : null %>> <%= oneCategory.name %> </option>
								<% } %>
							</select>
						<div class="error"><%= errors.category.msg %></div>
					<% } else { %>
						<select  class="controlar" name="category" id="category" >
							<option value="">Elegí una categoría:</option>
							<% for(const oneCategory of usersCategories) { %>
								<option value="<%= oneCategory.category_id %>" <%= locals.oldData && (oneCategory.name === oldData.category) ? 'selected' : null %>> <%= oneCategory.name %> </option>
							<% } %>
						</select>
						<% } %>
						<% if (locals.errors && errors.image) { %>
							<input style="border: red solid 2px;" class="controlar" type="file" name="image" id="image">
						<div class="error"><%= errors.image.msg %></div>
					<% } else { %>
						<input class="controlar" type="file" name="image" id="image">
						<% } %>
					<button class="boton" type="submit">Enviar</button>
				</form>
			</section>
			<div class="mensaje">
				<h4>Recordá:</h4>
				<hr>
				Es muy importante que coloques todos tus datos reales a la hora de registrar tu cuenta.
				Ante cualquier inconveniente vamos a estar comunicándonos con vos por teléfono o vía email.
			</div>
		</main>
		<%- include('../partials/footer') %>
</body>

</html>